<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} | {{ site.title }}</title>
    <meta name="description" content="{{ site.description }}">
    <link rel="icon" href="{{ '/favicon.svg' | relative_url }}" type="image/svg+xml">
    <link rel="stylesheet" href="{{ '/css/style.css' | relative_url }}">
    {% if page.extra_css %}
        {% for css in page.extra_css %}
        <link rel="stylesheet" href="{{ css | relative_url }}">
        {% endfor %}
    {% endif %}
</head>
<body>
    {% include navigation.html %}
    
    <main class="content">
        {% if page.title %}
        <h1>{{ page.title }}</h1>
        {% endif %}
        {{ content }}
    </main>
    
    {% include footer.html %}
    
    <!-- Mermaid diagram support -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // Initialize Mermaid on page load
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({ 
                startOnLoad: true, 
                theme: 'default',
                securityLevel: 'loose'
            });
            
            // Find all code blocks with language-mermaid class and render them
            document.querySelectorAll('pre code.language-mermaid').forEach((block) => {
                const pre = block.parentElement;
                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = block.textContent;
                pre.replaceWith(mermaidDiv);
            });
            
            // Trigger Mermaid rendering
            mermaid.run();
        });
    </script>
    
    {% if page.extra_js %}
        {% for js in page.extra_js %}
        <script src="{{ js | relative_url }}"></script>
        {% endfor %}
    {% endif %}
</body>
</html>

